{"componentChunkName":"component---src-templates-docs-markdown-template-tsx","path":"/docs/reference/shell-api/","result":{"pageContext":{"currentPath":"/docs/reference/shell-api","sourcePath":"docs/reference/shell-api.md","title":"Shell API","markdown":"# Shell API\n\nThe shell provides several services and integration points for federated apps.\n\n## Manifest Discovery\n\n### `MANIFEST_URLS`\n\n**File**: `apps/shell/src/config/apps.ts`\n\nA static array of manifest JSON URLs. Add your app's manifest URL here to register it with the shell.\n\n```typescript\nexport const MANIFEST_URLS: string[] = [\n  \"/manifests/hello-app.json\",\n  \"/manifests/docs-app.json\",\n];\n```\n\n### `loadManifests()`\n\n**File**: `apps/shell/src/services/manifestLoader.ts`\n\nFetches all manifests in parallel, validates each one, and returns the valid set. Invalid or unreachable manifests are skipped with a console warning.\n\n```typescript\nasync function loadManifests(): Promise<AppManifest[]>\n```\n\n## Module Loading\n\n### `loadAppModule(remoteId, remoteEntry)`\n\n**File**: `apps/shell/src/services/moduleLoader.ts`\n\nRegisters a remote with the MF runtime and dynamically imports its `./bootstrap` module.\n\n```typescript\nasync function loadAppModule(remoteId: string, remoteEntry: string): Promise<void>\n```\n\n- `remoteId`: MF remote name (underscores, e.g. `\"hello_app\"`)\n- `remoteEntry`: URL to the remote entry (absolute or relative)\n\n### `toRemoteId(appId)`\n\nConverts a kebab-case app ID to a valid MF remote name: `\"hello-app\"` → `\"hello_app\"`.\n\n## Registry Store\n\n**File**: `apps/shell/src/store/registry.ts`\n\nZustand store holding all discovered app manifests.\n\n```typescript\nconst useRegistry: () => { apps: AppManifest[] }\nconst useAppManifest: (id: string) => AppManifest | undefined\n```\n\n## Dev Manifest Rewrite Plugin\n\n**File**: `apps/shell/vite.config.ts`\n\nIn dev mode, the `devManifestRewritePlugin` intercepts requests to `/manifests/*.json` and rewrites the `remoteEntry` field to point at the app's MF manifest on its own dev server. This is required because Vite dev server virtual modules can only be loaded from their own origin.\n\nThe plugin auto-discovers all app origins from `@korporus/platform-config`:\n\n```typescript\nimport { getDevRemoteOrigins } from \"@korporus/platform-config\";\n\nconst devRemoteOrigins = getDevRemoteOrigins();\n// { \"hello-app\": \"http://localhost:3001\", \"docs-app\": \"http://localhost:3002\" }\n```\n\nTo add a new app, register it in `packages/platform-config/src/ports.ts` — the shell picks it up automatically.\n"}},"staticQueryHashes":[],"slicesMap":{}}