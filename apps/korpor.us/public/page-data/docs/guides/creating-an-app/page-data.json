{"componentChunkName":"component---src-templates-docs-markdown-template-tsx","path":"/docs/guides/creating-an-app/","result":{"pageContext":{"currentPath":"/docs/guides/creating-an-app","sourcePath":"docs/guides/creating-an-app.md","title":"Creating an App","markdown":"# Creating an App\n\nThis guide covers the full process of adding a new federated app to Korporus.\n\n## Overview\n\nA Korporus app is a pnpm workspace package that:\n\n1. Exposes three Web Components (titlebar, main, settings)\n2. Bundles them as a Module Federation remote\n3. Registers with the shell via a manifest JSON\n\n## Step 1: Register Your Port\n\nBefore anything else, register your app in the central port registry at `packages/platform-config/src/ports.ts`:\n\n```typescript\nconst PORT_REGISTRY: Record<string, PortEntry> = {\n  shell:       { dev: 3000, preview: 4000 },\n  \"hello-app\": { dev: 3001, preview: 4001 },\n  \"docs-app\":  { dev: 3002, preview: 4002 },\n  \"my-app\":    { dev: 3003, preview: 4003 },  // ← add your app\n};\n```\n\nThis is the **single source of truth** for all port assignments. The shell's dev manifest rewrite plugin will automatically discover your app — no manual wiring needed.\n\n## Step 2: Create the Package\n\n```bash\nmkdir -p packages/my-app/src/components\n```\n\n### package.json\n\n```json\n{\n  \"name\": \"@korporus/app-my-app\",\n  \"version\": \"0.0.0\",\n  \"private\": true,\n  \"type\": \"module\",\n  \"scripts\": {\n    \"dev\": \"vite\",\n    \"build\": \"vite build\",\n    \"typecheck\": \"tsc --noEmit\"\n  },\n  \"dependencies\": {\n    \"@korporus/web-component-wrapper\": \"workspace:*\",\n    \"react\": \"^19.0.0\",\n    \"react-dom\": \"^19.0.0\",\n    \"zustand\": \"^5.0.0\"\n  },\n  \"devDependencies\": {\n    \"@korporus/platform-config\": \"workspace:*\",\n    \"@module-federation/enhanced\": \"^0.7.0\",\n    \"@module-federation/vite\": \"^1.0.0\",\n    \"@types/react\": \"^19.0.0\",\n    \"@types/react-dom\": \"^19.0.0\",\n    \"@vitejs/plugin-react\": \"^4.0.0\",\n    \"typescript\": \"*\",\n    \"vite\": \"^6.0.0\"\n  }\n}\n```\n\nNote: no `--port` flags in dev scripts — port assignment comes from `@korporus/platform-config`.\n\n## Step 3: Configure Vite and Module Federation\n\n```typescript\n// vite.config.ts\nimport { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport { federation } from \"@module-federation/vite\";\nimport { getPortEntry, getDevOrigin } from \"@korporus/platform-config\";\n\nconst APP_ID = \"my-app\";\nconst ports = getPortEntry(APP_ID);\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    federation({\n      name: \"my_app\",           // underscores, not hyphens\n      filename: \"remoteEntry.js\",\n      manifest: true,\n      exposes: {\n        \"./bootstrap\": \"./src/bootstrap.ts\",\n      },\n      shared: {\n        react: { singleton: true, requiredVersion: \"^19.0.0\" },\n        \"react-dom\": { singleton: true, requiredVersion: \"^19.0.0\" },\n        zustand: { singleton: true },\n      },\n      dts: false,\n    }),\n  ],\n  server: {\n    port: ports.dev,\n    strictPort: true,      // Fail if port taken, don't silently increment\n    cors: true,\n    origin: getDevOrigin(APP_ID),\n  },\n  preview: {\n    port: ports.preview,\n    cors: true,\n  },\n});\n```\n\n## Step 4: Write Your Components\n\nCreate your three slot components. They're just React components — no special API:\n\n```typescript\n// src/components/MyMain.tsx\nexport function MyMain() {\n  return <div style={{ padding: 24 }}>Hello from my app!</div>;\n}\n```\n\nUse Zustand for state shared across slots — see [State Management](./state-management).\n\n## Step 5: Register as Web Components\n\n```typescript\n// src/bootstrap.ts\nimport { registerCustomElement } from \"@korporus/web-component-wrapper\";\nimport { MyTitlebar } from \"./components/MyTitlebar\";\nimport { MyMain } from \"./components/MyMain\";\nimport { MySettings } from \"./components/MySettings\";\n\nregisterCustomElement(\"my-app-titlebar\", MyTitlebar);\nregisterCustomElement(\"my-app-main\", MyMain);\nregisterCustomElement(\"my-app-settings\", MySettings);\n```\n\n## Step 6: Register with the Shell\n\n1. Create `apps/shell/public/manifests/my-app.json`:\n\n```json\n{\n  \"id\": \"my-app\",\n  \"name\": \"My Application\",\n  \"icon\": \"/manifests/my-app-icon.svg\",\n  \"version\": \"1.0.0\",\n  \"remoteEntry\": \"/apps/my-app/remoteEntry.js\",\n  \"slots\": {\n    \"titlebar\": \"my-app-titlebar\",\n    \"main\": \"my-app-main\",\n    \"settings\": \"my-app-settings\"\n  }\n}\n```\n\n2. Add the manifest URL to `apps/shell/src/config/apps.ts`\n\nThat's it for the shell — the `devManifestRewritePlugin` automatically discovers all apps registered in `@korporus/platform-config`, so no manual port wiring is needed.\n\n## Step 7: Install and Run\n\n```bash\npnpm install\ncd packages/my-app && pnpm dev   # Terminal 1\ncd apps/shell && pnpm dev         # Terminal 2\n```\n\nYour app should appear on the shell's home screen.\n"}},"staticQueryHashes":[],"slicesMap":{}}